function run(){var t=$("textarea").val();t=strToHTML(t);$("#resultContent")[0].contentDocument.getElementsByTagName("html")[0].innerHTML=t.innerHTML}function strToHTML(t){parser=new DOMParser;var e=parser.parseFromString(t,"text/html");return e.getElementsByTagName("html")[0]}console.log("debugger"),$(run),$(document).delegate("textarea","keydown",function(t){var e=t.keyCode||t.which;if(9==e){t.preventDefault();var n=this.selectionStart,r=this.selectionEnd;$(this).val($(this).val().substring(0,n)+"    "+$(this).val().substring(r)),this.selectionStart=this.selectionEnd=n+4}});